
<!DOCTYPE html>
<html>
    <head>
        <title>SQLi-pentest</title>
        <link rel="stylesheet" type="text/css" href="./styles.css">
    </head>

    <body>

        <?php

            try {
                $dsn = 'pgsql:host=postgres;port=5432;dbname=database';
                $username = 'user';
                $password = '.UYr930Qr';

                $pdo = new PDO($dsn, $username, $password);

                echo "<div class='container' id='login-form' style='display: block; text-align:center;'>";
                echo "<h2>Account Creation</h2>";
                echo "<form method='POST'>";
                echo "<input type='text' name='username' placeholder='Username'>";
                echo "<br>";
                echo "<br>";
                echo "<input type='email' name='email' placeholder='Email'>";
                echo "<br>";    
                echo "<br>";
                echo "<input type='text' name='password' placeholder='Password'>";
                echo "<br>";
                echo "<br>";
                echo "<input type='submit' value='Register'>";
                echo "</form>";
                echo "</div>";    
                echo "<hr style='margin: 6vh auto 0 auto; width:50%; text-align:center;'>";

                if ($_SERVER['REQUEST_METHOD'] == 'POST') {
                    $username = $_POST['username'];
                    $password = $_POST['password'];
                    $email = $_POST['email'];
                    $id = random_int(3, 100000);
                    $sql = "INSERT INTO users (id,username, password, email) VALUES ($id, '$username', '$email', '$password')";

                    // Preparare ed eseguire la query
                    $stmt = $pdo->exec($sql);

                }


            } catch (PDOException $e) {
                echo 'Connection failed: ' . $e->getMessage();
            }

            echo "<a href='index.php' id='back_button' style='margin: 3vh;'>Back</a>";
        ?>
    
    </body>
</html>